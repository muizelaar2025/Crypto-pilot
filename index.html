<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Crypto Pilot PWA</title>

  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icon.png">

  <style>
    body{font-family:Arial,Helvetica,sans-serif;margin:20px}
    nav{margin-bottom:15px}
    nav button{margin-right:8px;padding:6px 10px}
    .tab{display:none}
    .tab.active{display:block}
    .controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-bottom:10px}
    .pill{background:#007bff;color:#fff;padding:2px 6px;border-radius:4px;font-size:0.85em}
    table{width:100%;border-collapse:collapse;margin-top:8px}
    th,td{padding:6px;border:1px solid #eee;text-align:left}
    #output{margin-top:12px;max-height:200px;overflow:auto;border:1px solid #ccc;padding:10px;background:#fafafa}
    .advice-hold{color:green;font-weight:bold}
    .advice-sell{color:red;font-weight:bold}
    .small{font-size:0.9em;color:#555}
    h2,h3{margin-top:16px}
    .sim-overview{margin-bottom:8px}
  </style>
</head>
<body>
  <h1>🚀 Crypto Pilot</h1>

  <nav>
    <button onclick="showTab('dashboard')">📊 Dashboard</button>
    <button onclick="showTab('charts')">📈 Grafiek</button>
    <button onclick="showTab('adviceLog')">🧾 Advies Analyse</button>
    <button onclick="showTab('simulations')">💹 Simulaties</button>
  </nav>

  <!-- Dashboard -->
  <div id="tab-dashboard" class="tab active">
    <div class="controls">
      <label>Valuta:
        <select id="vsCurrency"><option value="eur" selected>EUR</option><option value="usd">USD</option></select>
      </label>

      <label>Interval:
        <select id="interval">
          <option value="10000">10s</option>
          <option value="30000">30s</option>
          <option value="60000" selected>1m</option>
          <option value="300000">5m</option>
        </select>
      </label>

      <button id="refreshSelection">🔄 Ververs selectie</button>
      <button id="startMonitor">▶️ Start monitor</button>
      <button id="stopMonitor">⏹ Stop monitor</button>

      <div style="margin-left:auto"><span class="small">Succesrate: <strong id="successRate">-</strong></span></div>
    </div>

    <h2>📊 Top 10 kansen</h2>
    <div id="top10-list"><em>Geen selectie geladen — klik "Ververs selectie".</em></div>

    <h2>📂 Holdings</h2>
    <div class="controls">
      <input id="hold-coin" type="text" placeholder="Coin id (bv. bitcoin)">
      <input id="hold-qty" type="number" placeholder="Aantal" step="0.0001">
      <input id="hold-price" type="number" placeholder="Aankoopprijs" step="0.01">
      <button id="addHolding">➕ Toevoegen</button>
      <div class="small">Tip: klik "Volgen" in Top10 om coin automatisch te vullen.</div>
    </div>
    <table id="holdings-table">
      <thead><tr><th>Coin</th><th>Aantal</th><th>Aank.prijs</th><th>Huid.prijs</th><th>Winst/Verlies</th><th>Advies</th><th>Actie</th></tr></thead>
      <tbody></tbody>
    </table>

    <h2>📜 Log</h2>
    <div id="output"></div>
  </div>

  <!-- Charts -->
  <div id="tab-charts" class="tab">
    <h2>📈 Grafiek</h2>
    <div class="controls">
      <label for="chart-coin">Coin:</label>
      <select id="chart-coin"></select>

      <label for="chart-range">Periode:</label>
      <select id="chart-range">
        <option value="1">24 uur</option>
        <option value="7" selected>7 dagen</option>
        <option value="30">30 dagen</option>
        <option value="90">90 dagen</option>
        <option value="365">1 jaar</option>
      </select>

      <button id="loadChart">Laad grafiek</button>
      <button id="autoChart">Auto voeg Top10</button>
    </div>
    <canvas id="coinChart" width="800" height="300"></canvas>
  </div>

  <!-- Advice log -->
  <div id="tab-adviceLog" class="tab">
    <h2>🧾 Advies Analyse</h2>
    <div class="small">Adviezen worden periodiek gecontroleerd.</div>
    <table id="adviceTable">
      <thead><tr><th>Tijd</th><th>Coin</th><th>Advies</th><th>Startprijs</th><th>Huid.prijs</th><th>Resultaat</th><th>Actie</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- Simulations -->
  <div id="tab-simulations" class="tab">
    <h2>💹 Simulaties</h2>

    <div class="controls">
      <button id="sim-start">▶️ Start simulatie (30 dagen)</button>
      <button id="sim-stop">⏸️ Stop simulatie</button>
      <button id="sim-reset">🔄 Reset simulatie</button>
      <label style="margin-left:auto" class="small">Startkapitaal per simulatie: €1500 — Bijstorting 1e vd maand: €150</label>
    </div>

    <div class="sim-overview" id="sim-overviews">
      <!-- will be filled by JS -->
    </div>

    <h3>Simulatie 1 — Vrije strategie</h3>
    <table id="sim1-table"><thead><tr><th>Dag</th><th>Actie</th><th>Coin</th><th>Aantal</th><th>Prijs</th><th>Winst/Verlies</th><th>Cash</th><th>Portefeuille</th></tr></thead><tbody></tbody></table>

    <h3>Simulatie 2 — Verwachte Top10</h3>
    <table id="sim2-table"><thead><tr><th>Dag</th><th>Actie</th><th>Coin</th><th>Aantal</th><th>Prijs</th><th>Winst/Verlies</th><th>Cash</th><th>Portefeuille</th></tr></thead><tbody></tbody></table>

    <h3>Simulatie 3 — Top10 aankopen</h3>
    <table id="sim3-table"><thead><tr><th>Dag</th><th>Actie</th><th>Coin</th><th>Aantal</th><th>Prijs</th><th>Winst/Verlies</th><th>Cash</th><th>Portefeuille</th></tr></thead><tbody></tbody></table>
  </div>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <!-- app -->
  <script src="app.js?v=1"></script>

  <script>
    if('serviceWorker' in navigator){
      navigator.serviceWorker.register('service-worker.js').catch(()=>{/* ignore */});
    }
  </script>
</body>
</html>
